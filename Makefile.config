# DIRAM Build Configuration - Shared across all components
# OBINexus Aegis Project

# Compiler settings
CC = gcc
AR = ar
CFLAGS_BASE = -Wall -Wextra -Werror -pedantic -std=c11 -fPIC -D_GNU_SOURCE -pthread
INCLUDES = -I./include

# Build mode
DEBUG ?= 0
ifeq ($(DEBUG), 1)
    BUILD_DIR = build/debug
    CFLAGS = $(CFLAGS_BASE) -g -O0 -DDEBUG
else
    BUILD_DIR = build/release
    CFLAGS = $(CFLAGS_BASE) -O3 -DNDEBUG
endif

# Directories
SRC_DIR = src
INCLUDE_DIR = include
OBJ_DIR = $(BUILD_DIR)/obj
BIN_DIR = $(BUILD_DIR)/bin
LIB_DIR = $(BUILD_DIR)/lib

# Library naming (CRITICAL: avoiding libdiram naming)
CORE_LIB_NAME = diram-core
HOTWIRE_LIB_NAME = diram-hotwire

# Export for sub-makefiles
export CC AR CFLAGS INCLUDES BUILD_DIR SRC_DIR INCLUDE_DIR OBJ_DIR BIN_DIR LIB_DIR
export CORE_LIB_NAME HOTWIRE_LIB_NAME
